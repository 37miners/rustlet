<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `librustlet` crate."><meta name="keywords" content="rust, rustlang, rust-lang, librustlet"><title>librustlet - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../librustlet/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate librustlet</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.0.3-beta1</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all librustlet's items</p></a><div class="block items"><ul><li><a href="#macros">Macros</a></li></ul></div><div id="sidebar-vars" data-name="librustlet" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">librustlet</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/librustlet/lib.rs.html#15-42" title="goto source code">[src]</a></span></h1><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.add_header.html" title="librustlet::add_header macro">add_header</a></div><div class="item-right docblock-short"><p>Adds a header to the response for this rustlet. The first parameter is the name of the header
to set and the second parameter is the value of the header. See examples below.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.async_complete.html" title="librustlet::async_complete macro">async_complete</a></div><div class="item-right docblock-short"><p>Completes a rustlet execution that is executing in an async_context.
This macro must be called so that the rustlet container knows that
a particular async rustlet is complete. Also see <a href="macro.async_context.html" title="async_context"><code>async_context</code></a> and the
example below.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.async_context.html" title="librustlet::async_context macro">async_context</a></div><div class="item-right docblock-short"><p>Creates an async context which may be used to pass execution of the rustlet into
another thread thus allowing the rustlet thread pool to continue processing other
rustlets. The first call to <a href="macro.async_context.html" title="async_context"><code>async_context</code></a> should not specify any parameters
and the second call should specify the returned parameter of the first call and be
in another thread. See the example below for details.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.bin_write.html" title="librustlet::bin_write macro">bin_write</a></div><div class="item-right docblock-short"><p>Writes a binary response to the client. The parameter must be a byte array.
Note that: data written via bin_write is buffered and is not necessarily sent immidiately.
To ensure all data is written, the user must call the <a href="macro.flush.html" title="flush"><code>flush</code></a> macro.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.binary.html" title="librustlet::binary macro">binary</a></div><div class="item-right docblock-short"><p>The binary macro is used to send and receive binary websocket messages.
If no parameters are specified, this macro will return the payload
of the message that is received from a [<code>Socklet::Binary</code>] <a href="macro.event.html" title="event"><code>event</code></a>.
The payload, which is a Vec<u8> is wrapped in a <a href="https://doc.rust-lang.org/1.58.1/core/result/enum.Result.html" title="std::result::Result"><code>std::result::Result</code></a> enum and an
error may be returned in the event of a misconfiguration. If two
parameters are specified, this macro will write data (second parameter)
to the handle (first parameter). The data is of type <a href="https://doc.rust-lang.org/1.58.1/alloc/slice/index.html" title="std::slice"><code>std::slice</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.cookie.html" title="librustlet::cookie macro">cookie</a></div><div class="item-right docblock-short"><p>Get the value of the specified cookie. To set cookies, see <a href="macro.set_cookie.html" title="set_cookie"><code>set_cookie</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.event.html" title="librustlet::event macro">event</a></div><div class="item-right docblock-short"><p>This macro is called to determine which type of WebSocket event
has occured within a [‘socklet’] closure. The macro returns a [<code>Socklet</code>] enum.
which can be used to determine what action should be taken by the socklet.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.flush.html" title="librustlet::flush macro">flush</a></div><div class="item-right docblock-short"><p>Flushes any buffered data previously sent via the <a href="macro.response.html" title="response"><code>response</code></a> macro.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.handle.html" title="librustlet::handle macro">handle</a></div><div class="item-right docblock-short"><p>The handle macro reutrns a handle that can be used to reply to any websocket.
It is important to note that it need not be used just for the websocket that
is currently being processed, but the handle can be stored and used by any thread
to respond to websocket events. The handle is a mutable reference to a
<a href="../nioruntime_http/http/struct.ConnData.html" title="nioruntime_http::ConnData"><code>nioruntime_http::ConnData</code></a> struct. To get a hashable element from this
struct, the <a href="../nioruntime_http/http/struct.ConnData.html#method.get_connection_id" title="nioruntime_http::ConnData::get_connection_id"><code>nioruntime_http::ConnData::get_connection_id</code></a> function may be
called. That id, which is a u128 can be used to store any data about this
connection, including the handle itself in a collection.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.header_len.html" title="librustlet::header_len macro">header_len</a></div><div class="item-right docblock-short"><p>Returns the number of headers sent in this HTTP request.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.header_name.html" title="librustlet::header_name macro">header_name</a></div><div class="item-right docblock-short"><p>Returns the header name for the specified index.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.header_value.html" title="librustlet::header_value macro">header_value</a></div><div class="item-right docblock-short"><p>Returns the header value for the specified index.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.mainlogerror.html" title="librustlet::mainlogerror macro">mainlogerror</a></div><div class="item-right docblock-short"><p>Internal macro used to log to the main log. Applications should use the default logger (or another
user specified logger). See <a href="../nioruntime_log/index.html" title="nioruntime_log"><code>nioruntime_log</code></a> for details on logging.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.ping.html" title="librustlet::ping macro">ping</a></div><div class="item-right docblock-short"><p>Send a websocket ping message. See <a href="https://datatracker.ietf.org/doc/html/rfc6455">https://datatracker.ietf.org/doc/html/rfc6455</a> for
more details on the websocket protocol and the usage of pings. Note that most browsers
do not support this message type.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.pong.html" title="librustlet::pong macro">pong</a></div><div class="item-right docblock-short"><p>Send a websocket pong message. See <a href="https://datatracker.ietf.org/doc/html/rfc6455">https://datatracker.ietf.org/doc/html/rfc6455</a> for
more details on the websocket protocol and the usage of pongs. Note that most browsers
do not support this message type.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.pubkey.html" title="librustlet::pubkey macro">pubkey</a></div><div class="item-right docblock-short"><p>Gets the tor pubkey associated with this rustlet container. Returns a Result with the
byte array. If tor is not congfigured, behavior is undefined.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.query.html" title="librustlet::query macro">query</a></div><div class="item-right docblock-short"><p>Get the value of the specified query parameter. Parsing is done with
the <a href="https://docs.rs/querystring/1.1.0/querystring/"><code>querystring</code></a> library.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.request.html" title="librustlet::request macro">request</a></div><div class="item-right docblock-short"><p>Get data from the request for this rustlet.
See the example below for possible values of the request parameter.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.request_content.html" title="librustlet::request_content macro">request_content</a></div><div class="item-right docblock-short"><p>Returns the content of the message body of the HTTP request.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.response.html" title="librustlet::response macro">response</a></div><div class="item-right docblock-short"><p>Writes a formated response to the client. The formatting is the same formatting as
the format! macro, as that is used internally to format the response. Note that
data written via response is buffered and is not necessarily sent immidiately.
To ensure all data is written, the user must call the <a href="macro.flush.html" title="flush"><code>flush</code></a> macro.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.rustlet.html" title="librustlet::rustlet macro">rustlet</a></div><div class="item-right docblock-short"><p>Specifies a rustlet. Rustlets are closures that process HTTP requests and generate a response,
so variables can be moved into them and shared among other rustlets or any other closure.
Rustlets are processed in the <a href="https://github.com/37miners/nioruntime">nioruntime</a>. So, the
exectuion is performant. See the other macros for detailed examples on how to use all of the
functionality of rustlets. To try out a minimally simple rustlet as a project, see
<a href="https://github.com/37miners/rustlet-simple/">rustlet-simple</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.rustlet_init.html" title="librustlet::rustlet_init macro">rustlet_init</a></div><div class="item-right docblock-short"><p>Initialize the rustlet container based on the specified configuration. The default
configuration may be used by calling <code>RustletConfig::default()</code>. See [<code>crate::RustletConfig</code>]
for details on configuring the Rustlet and Http containers.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.rustlet_mapping.html" title="librustlet::rustlet_mapping macro">rustlet_mapping</a></div><div class="item-right docblock-short"><p>Maps the specified uri to a rustlet. All requests to the container for this uri
will be processed by the specified rustlet.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.session.html" title="librustlet::session macro">session</a></div><div class="item-right docblock-short"><p>Sets or gets a value in the session. The session is an in-memory key/value store that can be used
by rustlets to store data that can be accessed by other rustlets. A session cookie is set called
rustletsessionid that lets the rustlet container know which user is which. The session is automatically
invalidated after a certain period of time where no calls to session! or session_delete! are made. By
default, this amount of time is 30 minutes, but it is configurable in
[<code>crate::RustletConfig::session_timeout</code>]. If only one parameter is specified, the value is retrieved
from the session data store, if two parameters are specified, the value is set, see the examples below
for more details.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.session_delete.html" title="librustlet::session_delete macro">session_delete</a></div><div class="item-right docblock-short"><p>Delete the entire session. See <a href="macro.session.html" title="session"><code>session</code></a> for more info on sessions. If a parameter is specified,
only that parameter is deleted from the session. With no parameter specified, the entire session
is invalidated.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.set_content_type.html" title="librustlet::set_content_type macro">set_content_type</a></div><div class="item-right docblock-short"><p>Sets the content-type header of this request.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.set_cookie.html" title="librustlet::set_cookie macro">set_cookie</a></div><div class="item-right docblock-short"><p>Set the value of the specified cookie. To get cookies, see <a href="macro.cookie.html" title="cookie"><code>cookie</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.set_redirect.html" title="librustlet::set_redirect macro">set_redirect</a></div><div class="item-right docblock-short"><p>Sets a redirect to another URL. The 301 HTTP Response is used for the redirect.
See example below.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.sign.html" title="librustlet::sign macro">sign</a></div><div class="item-right docblock-short"><p>Create a signature using dalek algorithm. This is useful with the pubkey!() and verify!() macros.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.smurf.html" title="librustlet::smurf macro">smurf</a></div><div class="item-right docblock-short"><p>Prints a smurf to the page.
All credit for the ascii art goes to Normand Veilleux.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.socklet.html" title="librustlet::socklet macro">socklet</a></div><div class="item-right docblock-short"><p>Specifies a socklet. Socklets are closures that are the equivalent to <a href="macro.rustlet.html" title="rustlet"><code>rustlet</code></a>’s, except
they handle websockets instead of HTTP requests. Since, like rustlets, socklets are closures
variables can be moved into them and shared with other socklets and rustlets or any other
closure. Socklets are processed in the <a href="https://github.com/37miners/nioruntime">nioruntime</a>. So, the
exectuion is performant. See the other macros for detailed examples on how to use all of the
functionality of socklets.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.socklet_mapping.html" title="librustlet::socklet_mapping macro">socklet_mapping</a></div><div class="item-right docblock-short"><p>Maps the specified uri to a socklet. This works similarly to how the
<a href="macro.rustlet_mapping.html" title="rustlet_mapping"><code>rustlet_mapping</code></a> macro works. All websocket requests to the container
for this uri will be processed by the specified socklet.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.text.html" title="librustlet::text macro">text</a></div><div class="item-right docblock-short"><p>The text macro is used to send and receive text websocket messages.
If no parameters are specified, this macro will return the payload
of the message that is received from a [<code>Socklet::Text</code>] <a href="macro.event.html" title="event"><code>event</code></a>.
The payload, which is a <a href="https://doc.rust-lang.org/1.58.1/alloc/string/struct.String.html" title="std::string::String"><code>std::string::String</code></a> is wrapped in
a <a href="https://doc.rust-lang.org/1.58.1/core/result/enum.Result.html" title="std::result::Result"><code>std::result::Result</code></a> enum and an error may be returned in the event
of a misconfiguration. If two parameters are specified, this macro will
write data (second parameter) to the handle (first parameter).
The data is of type <a href="https://doc.rust-lang.org/1.58.1/alloc/str/index.html" title="std::str"><code>std::str</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.verify.html" title="librustlet::verify macro">verify</a></div><div class="item-right docblock-short"><p>Verifies a signature using dalek algorithm. This is useful with the pubkey!() and sign!() macros.</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="librustlet" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
</body></html>